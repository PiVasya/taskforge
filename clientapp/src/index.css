@tailwind base;
@tailwind components;
@tailwind utilities;


/* ====== Токены ====== */
:root {
  --card: 255 255 255;
  --muted: 244 247 252;
}

.dark {
  --card: 15 23 42;   /* slate-900 */
  --muted: 30 41 59;  /* slate-800 */
}

/* Light Pink theme (светлая розовая) */
html.pink {
  --card: 255 241 246; /* rose-50 */
  --muted: 255 228 235; /* rose-100 */
}

/* ====== База / типографика / фон ====== */

/* Manrope по всему сайту (шире и «плотнее» визуально) */
html, body {
  font-family: "Manrope", ui-sans-serif, system-ui, -apple-system, "Segoe UI",
               Roboto, "Noto Sans", "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
}

html.pink body { @apply bg-pink-50 text-slate-800; }

body {
  @apply bg-slate-50 dark:bg-slate-900 text-slate-800 dark:text-slate-100;
}

/* Заголовки — чуть плотнее и «короче» трекинг */
h1, h2, h3, .h1, .h2, .h3 { @apply font-semibold tracking-tight; }

/* Кнопки в хедере — стабильная жирность */
header .btn-outline,
header .btn-primary {
  @apply font-medium;
}

.container-app { @apply mx-auto max-w-7xl px-4 sm:px-6 lg:px-8; }

.card {
  @apply rounded-2xl shadow-soft bg-[rgb(var(--card))] border border-slate-200/60 dark:border-slate-800/60;
}

.card-muted {
  @apply rounded-2xl bg-[rgb(var(--muted))] dark:bg-slate-800/70 border border-slate-200/60 dark:border-slate-800/60;
}

/* ====== Контролы ====== */
.btn { @apply inline-flex items-center gap-2 px-3 py-2 rounded-xl transition select-none; }
.btn-primary { @apply btn bg-brand-600 text-white hover:bg-brand-700 active:scale-[.99]; }
.btn-ghost { @apply btn bg-transparent hover:bg-slate-100 dark:hover:bg-slate-800; }
.btn-outline { @apply btn border border-slate-300 dark:border-slate-700 hover:bg-slate-100 dark:hover:bg-slate-800; }

.input {
  @apply w-full border border-slate-300 dark:border-slate-700 rounded-xl px-3 py-2 bg-white dark:bg-slate-900;
}
.input::placeholder { opacity: .7; }

.link { @apply underline underline-offset-2 hover:no-underline; }

/* Розовые акценты только где надо */
html.pink .btn-primary { @apply bg-pink-600 hover:bg-pink-700; }
html.pink .btn-outline { @apply border-pink-300 hover:bg-pink-100; }

/* НЕ красим все ссылки подряд в розовый — только .link */
html.pink a.link { @apply text-pink-700 hover:text-pink-800; }
/* Ссылки в шапке — под тему */
html.pink header a { @apply text-slate-800; }
.dark header a     { @apply text-slate-200; }

/* Ссылки по умолчанию наследуют цвет, чтобы «к заданиям курса» не синело */
a { color: inherit; }
a:hover { color: inherit; text-decoration-color: currentColor; }

/* ====== Select: единый стиль + темы
   ВАЖНО: больше НЕ трогаем .select класс — только настоящие <select> ====== */
select,
select.input {
  @apply w-full rounded-xl px-3 py-2;
  @apply border bg-white text-slate-800 border-slate-300;
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 20 20' fill='currentColor' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.24 4.24a.75.75 0 01-1.06 0L5.21 8.29a.75.75 0 01.02-1.08z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right .75rem center;
  background-size: 1rem 1rem;
  padding-right: 2.25rem; /* место под стрелку */
}
select:focus,
select.input:focus { @apply outline-none ring-2 ring-brand-500; }

/* Тёмная тема для select */
.dark select,
.dark select.input { @apply bg-slate-900 text-slate-100 border-slate-700; }
.dark select:focus,
.dark select.input:focus { @apply ring-brand-400; }

/* Розовая тема для select */
html.pink select,
html.pink select.input { @apply bg-pink-50 text-slate-800 border-pink-300; }
html.pink select:focus,
html.pink select.input:focus { @apply ring-pink-500; }

/* Firefox normalize for inputs */
@-moz-document url-prefix() {
  .input {
    -moz-appearance: none; appearance: none;
    background-clip: padding-box; outline: none; line-height: 1.2; min-height: 40px;
  }
  .input::placeholder { opacity: .7; }
}

/* Перекраска «брендовых» утилит в pink-теме */
html.pink .bg-brand-600       { @apply bg-pink-600; }
html.pink .text-brand-600     { @apply text-pink-600; }
html.pink .border-brand-600   { @apply border-pink-600; }
html.pink .from-brand-600\/10 { @apply from-pink-600/10; }

/* ====== Инпуты/редакторы: гармонизация и автофилл ====== */
input[type="text"],
input[type="email"],
input[type="password"],
textarea {
  @apply bg-[rgb(var(--card))] text-slate-800 dark:text-slate-100
         border rounded-xl px-3 py-2
         border-slate-300 dark:border-slate-700;
}

/* Моноширинная гарнитура в кодовых редакторах/textarea */
textarea,
code, pre,
.cm-editor, .cm-scroller, .monaco-editor, .monaco-editor * {
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace !important;
}

/* Подложки редакторов под тему */
.cm-editor, .monaco-editor, .cm-scroller {
  background: rgb(var(--card)) !important;
  color: inherit;
  border-radius: 0.75rem;
  border: 1px solid rgb(203 213 225 / 1);            /* slate-300 */
}
.dark .cm-editor, .dark .monaco-editor, .dark .cm-scroller {
  border-color: rgb(51 65 85 / 1);                   /* slate-700 */
}
html.pink .cm-editor, html.pink .monaco-editor, html.pink .cm-scroller {
  border-color: rgb(244 180 197 / 1);                /* нежно-розовая */
}

/* Autofill (Chrome/Edge/Safari) — убираем «голубизну» и красим под тему */
input:-webkit-autofill,
textarea:-webkit-autofill,
select:-webkit-autofill {
  -webkit-text-fill-color: rgb(15 23 42);
  box-shadow: inset 0 0 0 1000px rgb(255 255 255);
  transition: background-color 9999s ease-out 0s;
}
.dark input:-webkit-autofill,
.dark textarea:-webkit-autofill,
.dark select:-webkit-autofill {
  -webkit-text-fill-color: rgb(226 232 240);
  box-shadow: inset 0 0 0 1000px rgb(15 23 42);
}
html.pink input:-webkit-autofill,
html.pink textarea:-webkit-autofill,
html.pink select:-webkit-autofill {
  -webkit-text-fill-color: rgb(51 65 85);
  box-shadow: inset 0 0 0 1000px rgb(255 241 246);
}

/* Фокус под тему */
input:focus,
textarea:focus,
select:focus { @apply outline-none ring-2 ring-brand-500; }
.dark input:focus,
.dark textarea:focus,
.dark select:focus { @apply ring-brand-400; }
html.pink input:focus,
html.pink textarea:focus,
html.pink select:focus { @apply ring-pink-500; }

/* ====== Фоны-градиенты в pink — мягче ====== */
html.pink .bg-gradient-to-b {
  background-image: linear-gradient(
    to bottom,
    rgb(236 72 153 / 6%),
    rgb(236 72 153 / 0%) 45%,
    rgb(236 72 153 / 0%) 100%
  ) !important;
}

/* ====== Доп. классы для наших UI-компонентов ====== */
.field { @apply w-full; }
.field > .label { @apply block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1; }

/* алиасы под классы компонентов */
.textarea {
  @apply w-full bg-[rgb(var(--card))] text-slate-800 dark:text-slate-100
         border rounded-xl px-3 py-2
         border-slate-300 dark:border-slate-700;
}
.select {
  @apply w-full rounded-xl px-3 py-2 border bg-white text-slate-800 border-slate-300;
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 20 20' fill='currentColor' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.24 4.24a.75.75 0 01-1.06 0L5.21 8.29a.75.75 0 01.02-1.08z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right .75rem center;
  background-size: 1rem 1rem;
  padding-right: 2.25rem;
}
.select:focus { @apply outline-none ring-2 ring-brand-500; }
.dark .select { @apply bg-slate-900 text-slate-100 border-slate-700; }
.html.pink .select { @apply bg-pink-50 text-slate-800 border-pink-300; }
